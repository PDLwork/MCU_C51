C51 COMPILER V9.54   74HC595                                                               08/31/2021 21:00:32 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE 74HC595
OBJECT MODULE PLACED IN .\Objects\74HC595.obj
COMPILER INVOKED BY: D:\software\keil5\C51\BIN\C51.EXE 74HC595.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\74HC595.lst) OBJECT(.\Objects\74HC595.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "UserDef.H"
   3          #include "74HC595.H"
   4          
   5          /*******************************************************************************
   6          * 函 数 名              : _74HC595_Initialization
   7          * 函数功能              : 74HC595C初始化函数
   8          * 输    入              : 无
   9          * 输    出              : 无
  10          *******************************************************************************/
  11          extern void _74HC595_Initialization()
  12          {
  13   1              _595_SRCLK = 0;
  14   1              _595_RCLK = 0;
  15   1      }
  16          
  17          /*******************************************************************************
  18          * 函 数 名              : _74HC595_SendByte
  19          * 函数功能              : 给四块595芯片分别写入字节
  20          * 输    入              :       _595_Byte1  （写入的字节）
  21                                                  _595_Byte2
  22                                                  _595_Byte3
  23                                                  _595_Byte4
  24          * 输    出              : 无
  25          *******************************************************************************/
  26          static void _74HC595_SendByte(INT8U _595_Byte1, _595_Byte2, _595_Byte3, _595_Byte4)
  27          {
  28   1              INT8U i;
  29   1              for(i = 0; i <= 7; i++)                 //写入第四个字节
  30   1              {
  31   2                      _595_SER = _595_Byte4 & (0x80 >> i);
  32   2                      _595_SRCLK = 1;         //上升沿移位
  33   2                      _595_SRCLK = 0;
  34   2              }
  35   1              for(i = 0; i <= 7; i++)                 //写入第三个字节
  36   1              {
  37   2                      _595_SER = _595_Byte3 & (0x80 >> i);
  38   2                      _595_SRCLK = 1;
  39   2                      _595_SRCLK = 0;
  40   2              }
  41   1              for(i = 0; i <= 7; i++)                 //写入第二个字节
  42   1              {
  43   2                      _595_SER = _595_Byte2 & (0x80 >> i);
  44   2                      _595_SRCLK = 1;
  45   2                      _595_SRCLK = 0;
  46   2              }
  47   1              for(i = 0; i <= 7; i++)                 //写入第一个字节
  48   1              {
  49   2                      _595_SER = _595_Byte1 & (0x80 >> i);
  50   2                      _595_SRCLK = 1;
  51   2                      _595_SRCLK = 0;
  52   2              }
  53   1              _595_RCLK = 1;  //上升沿锁存
  54   1              _595_RCLK = 0;
C51 COMPILER V9.54   74HC595                                                               08/31/2021 21:00:32 PAGE 2   

  55   1      }
  56          
  57          extern void MatrixLED(INT8U Column, Byte1, Byte2)
  58          {
  59   1              INT8U Column1, Column2;
  60   1              if(Column <= 8)
  61   1              {
  62   2                      Column1 = (0x01 << (Column - 1)); 
  63   2                      Column2 = 0x00;
  64   2              }
  65   1              if((Column > 8) && (Column <= 16))
  66   1              {
  67   2                      Column2 = (0x01 << (Column - 9)); 
  68   2                      Column1 = 0x00;
  69   2              }
  70   1              _74HC595_SendByte(Byte1, Byte2, Column1, Column2);
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    254    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
