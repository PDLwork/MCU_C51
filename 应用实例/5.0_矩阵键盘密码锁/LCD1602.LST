C51 COMPILER V9.54   LCD1602                                                               06/22/2021 12:14:57 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN LCD1602.OBJ
COMPILER INVOKED BY: D:\software\keil5\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REG52.H>
   2          #include "UserDef.H"
   3          #include "LCD1602.H"
   4          #include "Delay.h"
   5          #include "keyboard.h"                                                                   
   6          
   7          /*******************************************************************************
   8          * 函 数 名         : LCD_WriteCommand （LCD1602写命令函数）
   9          * 函数功能                 : 为LCD写入命令
  10          * 输    入         : LCD_Command （输入命令）
  11          * 输    出         : 无
  12          *******************************************************************************/
  13          extern void LCD_WriteCommand(INT8U LCD_Command)  
  14          { 
  15   1           LCD_RS = 0;
  16   1           LCD_RW = 0;
  17   1           LCD_DataPort = LCD_Command;
  18   1           DelayXms(5);
  19   1           LCD_E = 1;
  20   1           DelayXms(5);
  21   1           LCD_E = 0;
  22   1      }
  23          
  24          /*******************************************************************************
  25          * 函 数 名         : LCD_WriteData （LCD1602写数据函数）
  26          * 函数功能                 : 为LCD写入数据
  27          * 输    入         : LCD_Data （输入数据）
  28          * 输    出         : 无
  29          *******************************************************************************/
  30          static void LCD_WriteData(INT8U LCD_Data)  
  31          { 
  32   1           LCD_RS = 1;
  33   1           LCD_RW = 0;
  34   1           LCD_DataPort = LCD_Data;
  35   1           DelayXms(5);
  36   1           LCD_E = 1;
  37   1           DelayXms(5);
  38   1           LCD_E = 0;
  39   1      }
  40          
  41          /*******************************************************************************
  42          * 函 数 名         : LCD_Initialization （LCD1602初始化函数）
  43          * 函数功能                 : 液晶显示屏是初始化设置
  44          * 输    入         : 无
  45          * 输    出         : 无
  46          *******************************************************************************/
  47          extern void LCD_Initialization()   
  48          {
  49   1          LCD_WriteCommand(0x01);        //清屏
  50   1          LCD_WriteCommand(0x38);        //设置显示两行、每个字符为5*7点阵、数据线为8根
  51   1              LCD_WriteCommand(0x06);    //输入后地址指针右移
  52   1              LCD_WriteCommand(0x0c);    //显示打开、光标关闭
  53   1      }
  54          
  55          /*******************************************************************************
C51 COMPILER V9.54   LCD1602                                                               06/22/2021 12:14:57 PAGE 2   

  56          * 函 数 名         : LCD_site （LCD确认显示位置函数）
  57          * 函数功能                 : 输入坐标确认显示位置
  58          * 输    入         : Line（显示横坐标，范围：1～2）
  59                                                   Cloumn（显示纵坐标，范围：1～16）
  60          * 输    出         : 无
  61          *******************************************************************************/
  62          extern void LCD_site(INT8U Line,INT8U Cloumn)
  63          {
  64   1              if(Line == 1)
  65   1              {
  66   2                      LCD_WriteCommand(0x80 + (Cloumn - 1));
  67   2              }
  68   1              if(Line == 2)
  69   1              {
  70   2                      LCD_WriteCommand((0x80 + 0x40) + (Cloumn - 1));
  71   2              }
  72   1      
  73   1      }
  74          
  75          /*******************************************************************************
  76          * 函 数 名         : LCD_ShowString （LCD显示字符串函数）
  77          * 函数功能                 : 在输入显示位置开始显示字符串
  78          * 输    入         : Line（显示横坐标，范围：1～2）
  79                                                   Cloumn（显示纵坐标，范围：1～16）
  80                                                   String（显示字符串）
  81          * 输    出         : 无
  82          *******************************************************************************/
  83          extern void LCD_ShowString(INT8U Line,INT8U Cloumn,INT8S String[])
  84          {
  85   1              INT8U i;
  86   1              LCD_site(Line,Cloumn);
  87   1              for(i=0; String[i] != '\0'; i++)
  88   1              {
  89   2                      LCD_WriteData(String[i]);
  90   2              }
  91   1      }
  92          
  93          /*******************************************************************************
  94          * 函 数 名         : LCD_ShowNumber （LCD显示数字函数）
  95          * 函数功能                 : 在输入显示位置显示数字
  96          * 输    入         : Line（显示横坐标，范围：1～2）
  97                                                   Cloumn（显示纵坐标，范围：1～16）
  98                                                   Number（显示数字，范围：1~65535）
  99          * 输    出         : 无
 100          *******************************************************************************/
 101          extern void LCD_ShowNumber(INT8U Line,INT8U Cloumn,INT16U Number)
 102          {
 103   1              INT8U x, LCD_Number[4];
 104   1              LCD_site(Line,Cloumn);
 105   1              
 106   1              LCD_Number[0] = Number / 10000;                 //用于存放万位
 107   1              LCD_Number[1] = (Number % 10000) / 1000;                //用于存放千位
 108   1              LCD_Number[2] = (Number % 1000) / 100;                  //用于存放百位
 109   1              LCD_Number[3] = (Number % 100) / 10;                    //用于存放十位
 110   1              LCD_Number[4] = Number % 10;                                    //用于存放个位
 111   1      
 112   1              for(x = 0; x <= 4; x++)
 113   1              {
 114   2                      if(LCD_Number[x] != 0)
 115   2                              break;
 116   2              }
 117   1              for( ; x <= 4; x++)
C51 COMPILER V9.54   LCD1602                                                               06/22/2021 12:14:57 PAGE 3   

 118   1              {
 119   2                      LCD_WriteData('0' + LCD_Number[x]);
 120   2              }
 121   1      
 122   1      }
 123          
 124          /*******************************************************************************
 125          * 函 数 名         : LCD_ShowNumber （LCD显示数字函数）
 126          * 函数功能                 : 在输入显示位置显示数字
 127          * 输    入         : Line（显示横坐标，范围：1～2）
 128                                                   Cloumn（显示纵坐标，范围：1～16）
 129                                                   Number（显示数字，范围：1~65535）
 130          * 输    出         : 无
 131          *******************************************************************************/
 132          extern void LCD_ShowChar(INT8U Line,INT8U Cloumn,INT8U LCD_Char)
 133          {
 134   1              LCD_site(Line,Cloumn);
 135   1              LCD_WriteData(LCD_Char);
 136   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    302    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
